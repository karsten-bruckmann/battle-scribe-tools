"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[8221],{9024:(k,w,i)=>{i.d(w,{A:()=>L});var v=i(9671),x=i(6895);let _,y;const t=new WeakMap,D=new WeakMap,O=new WeakMap,Z=new WeakMap,E=new WeakMap;let u={get(e,n,o){if(e instanceof IDBTransaction){if("done"===n)return D.get(e);if("objectStoreNames"===n)return e.objectStoreNames||O.get(e);if("store"===n)return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return m(e[n])},set:(e,n,o)=>(e[n]=o,!0),has:(e,n)=>e instanceof IDBTransaction&&("done"===n||"store"===n)||n in e};function p(e){return"function"==typeof e?function s(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function C(){return y||(y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...n){return e.apply(b(this),n),m(t.get(this))}:function(...n){return m(e.apply(b(this),n))}:function(n,...o){const r=e.call(b(this),n,...o);return O.set(r,n.sort?n.sort():[n]),m(r)}}(e):(e instanceof IDBTransaction&&function T(e){if(D.has(e))return;const n=new Promise((o,r)=>{const c=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",g),e.removeEventListener("abort",g)},d=()=>{o(),c()},g=()=>{r(e.error||new DOMException("AbortError","AbortError")),c()};e.addEventListener("complete",d),e.addEventListener("error",g),e.addEventListener("abort",g)});D.set(e,n)}(e),((e,n)=>n.some(o=>e instanceof o))(e,function I(){return _||(_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,u):e)}function m(e){if(e instanceof IDBRequest)return function P(e){const n=new Promise((o,r)=>{const c=()=>{e.removeEventListener("success",d),e.removeEventListener("error",g)},d=()=>{o(m(e.result)),c()},g=()=>{r(e.error),c()};e.addEventListener("success",d),e.addEventListener("error",g)});return n.then(o=>{o instanceof IDBCursor&&t.set(o,e)}).catch(()=>{}),E.set(n,e),n}(e);if(Z.has(e))return Z.get(e);const n=p(e);return n!==e&&(Z.set(e,n),E.set(n,e)),n}const b=e=>E.get(e),U=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],B=new Map;function F(e,n){if(!(e instanceof IDBDatabase)||n in e||"string"!=typeof n)return;if(B.get(n))return B.get(n);const o=n.replace(/FromIndex$/,""),r=n!==o,c=Y.includes(o);if(!(o in(r?IDBIndex:IDBObjectStore).prototype)||!c&&!U.includes(o))return;const d=function(){var g=(0,v.Z)(function*($,...h){const M=this.transaction($,c?"readwrite":"readonly");let J=M.store;return r&&(J=J.index(h.shift())),(yield Promise.all([J[o](...h),c&&M.done]))[0]});return function(h){return g.apply(this,arguments)}}();return B.set(n,d),d}!function l(e){u=e(u)}(e=>({...e,get:(n,o,r)=>F(n,o)||e.get(n,o,r),has:(n,o)=>!!F(n,o)||e.has(n,o)}));var G=i(7579),K=i(9300),R=i(8675),H=i(3900),Q=i(457),W=i(4004);class N{constructor(n){this.storeName=n,this.changed$=new G.x}get db(){return function S(e,n,{blocked:o,upgrade:r,blocking:c,terminated:d}={}){const g=indexedDB.open(e,n),$=m(g);return r&&g.addEventListener("upgradeneeded",h=>{r(m(g.result),h.oldVersion,h.newVersion,m(g.transaction),h)}),o&&g.addEventListener("blocked",h=>o(h.oldVersion,h.newVersion,h)),$.then(h=>{d&&h.addEventListener("close",()=>d()),c&&h.addEventListener("versionchange",M=>c(M.oldVersion,M.newVersion,M))}).catch(()=>{}),$}("images",1,{upgrade:n=>{n.createObjectStore(this.storeName)}})}getImage$(n){return this.changed$.pipe((0,K.h)(o=>o===n),(0,R.O)(n),(0,H.w)(o=>(0,Q.D)(this.db.then(r=>r.get(this.storeName,`${o}`)))),(0,W.U)(o=>o||null))}setImage(n,o){var r=this;return(0,v.Z)(function*(){const c=yield r.convertBase64(o);yield(yield r.db).put(r.storeName,c,n),r.changed$.next(n)})()}deleteImage(n){var o=this;return(0,v.Z)(function*(){yield(yield o.db).delete(o.storeName,n),o.changed$.next(n)})()}convertBase64(n){return(0,v.Z)(function*(){return new Promise((o,r)=>{const c=new FileReader;c.readAsDataURL(n),c.onload=()=>{const d=c.result;d?o(d.toString()):r()},c.onerror=d=>{r(d)}})})()}}var a=i(4650);class A{create(n){return new N(n)}}A.\u0275fac=function(n){return new(n||A)},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});var j=i(603),V=i(1135),z=i(1848);function X(e,n){if(1&e){const o=a.EpF();a.TgZ(0,"ion-icon",5),a.NdJ("click",function(){a.CHM(o);const c=a.oxw(2);return a.KtG(c.delete())}),a.qZA()}}function q(e,n){if(1&e&&(a.TgZ(0,"div",2),a._UZ(1,"img",3),a.YNc(2,X,1,0,"ion-icon",4),a.qZA()),2&e){const o=n.ngIf,r=a.oxw();a.xp6(1),a.Q6J("src",o,a.LSH),a.xp6(1),a.Q6J("ngIf",r.editable)}}function tt(e,n){if(1&e){const o=a.EpF();a.TgZ(0,"ion-button",6),a.NdJ("click",function(){a.CHM(o);const c=a.MAs(3),d=a.oxw();return a.KtG(d.editable&&c.click())}),a._UZ(1,"ion-icon",7),a.qZA(),a.TgZ(2,"input",8,9),a.NdJ("change",function(c){a.CHM(o);const d=a.oxw();return a.KtG(d.save(c))}),a.qZA()}}class L{constructor(n){this.imagesService=n,this.editable=!1,this.name$=new V.X(null),this.data$=this.name$.pipe((0,H.w)(o=>o?this.imagesService.getImage$(o):z.C))}set name(n){this.name$.next(n)}save(n){var o=this;return(0,v.Z)(function*(){const r=o.name$.value;r&&o.imagesService.setImage(r,n.target.files[0])})()}delete(){const n=this.name$.value;n&&this.name$.value&&this.imagesService.deleteImage(n)}}L.\u0275fac=function(n){return new(n||L)(a.Y36(N))},L.\u0275cmp=a.Xpm({type:L,selectors:[["bst-avatar"]],inputs:{editable:"editable",name:"name"},standalone:!0,features:[a._Bn([{provide:N,useFactory:e=>e.create("avatars"),deps:[A]}]),a.jDz],decls:4,vars:4,consts:[["class","existing",4,"ngIf","ngIfElse"],["form",""],[1,"existing"],[3,"src"],["name","close-circle","class","delete","color","medium",3,"click",4,"ngIf"],["name","close-circle","color","medium",1,"delete",3,"click"],["fill","clear","color","light",1,"upload",3,"click"],["name","image",1,"upload"],["type","file","accept","image/*",1,"ion-hide",3,"change"],["f",""]],template:function(n,o){if(1&n&&(a.YNc(0,q,3,2,"div",0),a.ALo(1,"async"),a.YNc(2,tt,4,0,"ng-template",null,1,a.W1O)),2&n){const r=a.MAs(3);a.Q6J("ngIf",a.lcZ(1,2,o.data$))("ngIfElse",r)}},dependencies:[x.ez,x.O5,x.Ov,j.Pc,j.YG,j.gu],styles:["[_nghost-%COMP%]{display:block;width:100%;aspect-ratio:1/1;display:flex;flex-direction:column;justify-content:space-around;overflow:hidden;border-radius:5%;background-color:rgb(var(--ion-color-light-rgb),.5)}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;overflow:hidden}.existing[_ngcontent-%COMP%]{width:100%;height:100%}ion-button.upload[_ngcontent-%COMP%], ion-icon.upload[_ngcontent-%COMP%]{width:100%;height:100%}ion-icon.delete[_ngcontent-%COMP%]{position:absolute;right:0;top:0;opacity:.8}"]})},8967:(k,w,i)=>{i.d(w,{s:()=>T});var v=i(6895),x=i(3573),f=i(603),_=i(1135),y=i(9841),I=i(4004),C=i(4782),t=i(4650),D=i(1481);function O(u,l){if(1&u&&t._UZ(0,"span",4),2&u){const s=t.oxw().ngIf,p=t.oxw();t.Q6J("innerHTML",p.listify(s),t.oJD)}}function Z(u,l){if(1&u){const s=t.EpF();t.TgZ(0,"span",5),t.NdJ("click",function(){t.CHM(s),t.oxw();const m=t.MAs(8),b=t.oxw();return t.KtG(b.translateOnClick&&m.present())}),t.qZA()}if(2&u){const s=t.oxw().ngIf,p=t.oxw();t.Q6J("innerHTML",p.listify(s),t.oJD)}}function E(u,l){if(1&u){const s=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",6)(3,"ion-button",7),t.NdJ("click",function(){t.CHM(s),t.oxw();const m=t.MAs(8);return t.KtG(m.dismiss())}),t._uU(4,"abbrechen"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"\xdcbersetzen"),t.qZA(),t.TgZ(7,"ion-buttons",8)(8,"ion-button",9),t.NdJ("click",function(){t.CHM(s);const m=t.MAs(15);t.oxw();const b=t.MAs(8),S=t.oxw();return S.translate(S.original,m.value),t.KtG(b.dismiss())}),t._uU(9,"OK"),t.qZA()()()(),t.TgZ(10,"ion-content",10)(11,"ion-item",11),t._uU(12),t.qZA(),t.TgZ(13,"ion-item",11),t._UZ(14,"ion-textarea",12,13),t.qZA()()}if(2&u){const s=t.oxw().ngIf,p=t.oxw();t.xp6(8),t.Q6J("strong",!0),t.xp6(4),t.hij(" ",p.original,""),t.xp6(2),t.Q6J("autoGrow",!0)("value",s)}}function P(u,l){if(1&u&&(t.ynx(0),t.YNc(1,O,1,1,"span",1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,Z,1,1,"span",2),t.ALo(5,"async"),t.ALo(6,"async"),t.TgZ(7,"ion-modal",null,3),t.YNc(9,E,16,4,"ng-template"),t.qZA(),t.BQk()),2&u){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,s.editable$)||!1===t.lcZ(3,4,s.editable$)),t.xp6(3),t.Q6J("ngIf",!0===t.lcZ(5,6,s.editable$)&&!0===t.lcZ(6,8,s.editable$))}}class T{constructor(l,s){this.translationService=l,this.domSanitizer=s,this.translateOnClick=!0,this.original="",this.hasTextChars$=new _.X(!1),this.editable$=(0,y.a)([this.translationService.translationsEditMode$,this.translationService.translatable$,this.hasTextChars$]).pipe((0,I.U)(([p,m,b])=>p&&m&&b))}set text(l){this.original=l,this.hasTextChars$.next(!!l.match("[a-zA-Z]+"))}ngOnChanges(l){const s=l.text;s&&(this.translation$=this.translationService.getTranslation(s.currentValue).pipe((0,C.d)(1)))}translate(l,s){this.translationService.translate(l,s||"")}listify(l){let s=l;return[...l.matchAll(/(?:(?:^|\n)(?:- [^\n]+(?:\n|$)*)+)/gm)].forEach(p=>{s=s.replace(p[0],`<ul>${p[0].replaceAll(/(?:^|\n)- (.*)(?:\n|$)/gm,"<li>$1</li>")}</ul>`)}),this.domSanitizer.bypassSecurityTrustHtml(s)}}T.\u0275fac=function(l){return new(l||T)(t.Y36(x.fA),t.Y36(D.H7))},T.\u0275cmp=t.Xpm({type:T,selectors:[["bst-translatable"]],inputs:{text:"text",translateOnClick:"translateOnClick"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML","click",4,"ngIf"],["popover",""],[3,"innerHTML"],[3,"innerHTML","click"],["slot","start"],[3,"click"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],["lines","none"],[3,"autoGrow","value"],["ta",""]],template:function(l,s){1&l&&(t.YNc(0,P,10,10,"ng-container",0),t.ALo(1,"async")),2&l&&t.Q6J("ngIf",t.lcZ(1,1,s.translation$))},dependencies:[v.ez,v.O5,v.Ov,f.Pc,f.YG,f.Sm,f.W2,f.Gu,f.Ie,f.g2,f.wd,f.sr,f.ki,f.j9],styles:["[_nghost-%COMP%]{display:inline-block}span[_ngcontent-%COMP%]{white-space:pre-wrap}ion-item[_ngcontent-%COMP%]{white-space:pre-wrap}ion-textarea[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid var(--ion-color-medium);color:1px solid var(--ion-color-dark);font-family:monospace}"]})},4782:(k,w,i)=>{i.d(w,{d:()=>f});var v=i(4707),x=i(3099);function f(_,y,I){let C,t=!1;return _&&"object"==typeof _?({bufferSize:C=1/0,windowTime:y=1/0,refCount:t=!1,scheduler:I}=_):C=_??1/0,(0,x.B)({connector:()=>new v.t(C,y,I),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:t})}}}]);