"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[4539],{4539:(z,h,a)=>{a.r(h),a.d(h,{PagesPrintRosterComponent:()=>s});var x=a(9671),l=a(6895),m=a(4258),p=a(7243),C=a(3761),f=a(391),u=a(8076),O=a(9287),v=a(3438),g=a(603),d=a(3900),b=a(9841),M=a(4004),Z=a(3905),t=a(4650),y=a(9653);function Q(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td",6),t._UZ(2,"bst-translatable",4),t.qZA(),t.TgZ(3,"td",7),t._UZ(4,"bst-translatable",4),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.Q6J("text",e.title),t.xp6(2),t.Q6J("text",e.description)}}function R(o,n){1&o&&t._UZ(0,"bst-unit-card",8),2&o&&t.Q6J("unit",n.$implicit)}function T(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"h2"),t._UZ(2,"bst-translatable",4),t.qZA(),t.TgZ(3,"h3"),t._UZ(4,"bst-translatable",4),t.qZA(),t.TgZ(5,"table"),t.YNc(6,Q,5,2,"tr",3),t.qZA(),t.YNc(7,R,1,1,"bst-unit-card",5),t.BQk()),2&o){const e=n.$implicit;t.xp6(2),t.Q6J("text",e.title),t.xp6(2),t.Q6J("text","Detachment Rules"),t.xp6(2),t.Q6J("ngForOf",e.rules),t.xp6(1),t.Q6J("ngForOf",e.units)}}function $(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"h1"),t._UZ(2,"bst-translatable",2),t.qZA(),t.YNc(3,T,8,4,"ng-container",3),t.BQk()),2&o){const e=n.ngIf;t.xp6(2),t.Q6J("text",e.title)("translateOnClick",!1),t.xp6(1),t.Q6J("ngForOf",e.detachments)}}class s{constructor(n,e){this.store$=n,this.activatedRoute=e,this.roster$=(0,O.j)("roster-id",this.activatedRoute).pipe((0,d.w)(i=>this.store$.select((0,C.bQ)(i)))),this.detachment$=(0,v.L)(["roster-id","detachment-index"],this.activatedRoute).pipe((0,d.w)(([i,r])=>this.store$.select((0,p.mb)(i,parseInt(r))))),this.unit$=(0,v.L)(["roster-id","detachment-index","unit-index"],this.activatedRoute).pipe((0,d.w)(([i,r,c])=>this.store$.select((0,p.sl)(i,parseInt(r),parseInt(c))))),this.detachmentRules$=(0,b.a)([this.detachment$,this.unit$]).pipe((0,M.U)(([i,r])=>i?.rules.filter(c=>void 0===r?.rules.find(P=>P.title===c.title&&P.description===c.description))||[]))}ngAfterViewInit(){var n=this;return(0,x.Z)(function*(){n.unitCards&&(yield(0,Z.z)((0,b.a)(n.unitCards.map(e=>e.avatarLoaded))),window.print(),setTimeout(()=>{history.back()},1e3))})()}}s.\u0275fac=function(n){return new(n||s)(t.Y36(y.yh),t.Y36(m.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(n,e){if(1&n&&t.Gf(u.l,5),2&n){let i;t.iGM(i=t.CRH())&&(e.unitCards=i)}},standalone:!0,features:[t._Bn([{provide:f.Y,useValue:!0}]),t.jDz],decls:4,vars:3,consts:[["name","dots"],[4,"ngIf"],[3,"text","translateOnClick"],[4,"ngFor","ngForOf"],[3,"text"],[3,"unit",4,"ngFor","ngForOf"],[1,"wrap"],[1,"wrap","long"],[3,"unit"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content"),t._UZ(1,"ion-spinner",0),t.YNc(2,$,4,3,"ng-container",1),t.ALo(3,"async"),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,e.roster$)))},dependencies:[l.ez,l.sg,l.O5,l.Ov,m.Bz,g.Pc,g.W2,g.PQ,f.s,u.l,p.Gx],styles:["[_nghost-%COMP%]{display:block}@media screen{[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(ion-spinner){display:none}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}}@media print{[_nghost-%COMP%]   ion-spinner[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]     h1{page-break-after:always;margin-top:50vh;font-variant:small-caps;text-align:center;font-size:50px}[_nghost-%COMP%]     h2{page-break-after:avoid;text-align:center;margin-bottom:30px;font-variant:small-caps;font-size:40px}[_nghost-%COMP%]     h3{page-break-after:avoid;margin-bottom:30px;font-variant:small-caps;font-size:30px}[_nghost-%COMP%]     h4{page-break-after:avoid;margin-bottom:30px;font-variant:small-caps;font-size:20px}[_nghost-%COMP%]     ion-text{clear:both;display:block;page-break-after:avoid}[_nghost-%COMP%]     bst-unit-card{clear:both;page-break-before:always;position:relative;display:block}[_nghost-%COMP%]     bst-unit-card .unit-info{display:block;height:100px;padding-right:100px;overflow:visible}[_nghost-%COMP%]     bst-unit-card .unit-info bst-avatar{position:absolute;top:0;right:-100px;height:100px}[_nghost-%COMP%]     bst-unit-card .unit-info bst-avatar input{display:none}[_nghost-%COMP%]     bst-unit-card .unit-info bst-avatar ion-icon{display:none}[_nghost-%COMP%]     .scroller{float:left;width:100%;margin:0;padding:0;page-break-inside:avoid}[_nghost-%COMP%]     .scroller.profile{width:40%}[_nghost-%COMP%]     .scroller.weapons{width:60%}[_nghost-%COMP%]     table{page-break-inside:avoid;page-break-before:avoid;font-size:12px;border-spacing:0;border-collapse:collapse;margin:10px!important;width:calc(100% - 20px)!important}[_nghost-%COMP%]     table td, [_nghost-%COMP%]     table th{vertical-align:top;border:1px solid rgb(239,239,239);border-collapse:collapse;margin:0}"]})}}]);