"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[4689],{9024:(B,T,s)=>{s.d(T,{A:()=>L});var v=s(9671),b=s(6895);let _,y;const t=new WeakMap,w=new WeakMap,P=new WeakMap,E=new WeakMap,Z=new WeakMap;let u={get(e,n,o){if(e instanceof IDBTransaction){if("done"===n)return w.get(e);if("objectStoreNames"===n)return e.objectStoreNames||P.get(e);if("store"===n)return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return f(e[n])},set:(e,n,o)=>(e[n]=o,!0),has:(e,n)=>e instanceof IDBTransaction&&("done"===n||"store"===n)||n in e};function p(e){return"function"==typeof e?function i(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function I(){return y||(y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...n){return e.apply(C(this),n),f(t.get(this))}:function(...n){return f(e.apply(C(this),n))}:function(n,...o){const r=e.call(C(this),n,...o);return P.set(r,n.sort?n.sort():[n]),f(r)}}(e):(e instanceof IDBTransaction&&function M(e){if(w.has(e))return;const n=new Promise((o,r)=>{const c=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",g),e.removeEventListener("abort",g)},d=()=>{o(),c()},g=()=>{r(e.error||new DOMException("AbortError","AbortError")),c()};e.addEventListener("complete",d),e.addEventListener("error",g),e.addEventListener("abort",g)});w.set(e,n)}(e),((e,n)=>n.some(o=>e instanceof o))(e,function x(){return _||(_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,u):e)}function f(e){if(e instanceof IDBRequest)return function S(e){const n=new Promise((o,r)=>{const c=()=>{e.removeEventListener("success",d),e.removeEventListener("error",g)},d=()=>{o(f(e.result)),c()},g=()=>{r(e.error),c()};e.addEventListener("success",d),e.addEventListener("error",g)});return n.then(o=>{o instanceof IDBCursor&&t.set(o,e)}).catch(()=>{}),Z.set(n,e),n}(e);if(E.has(e))return E.get(e);const n=p(e);return n!==e&&(E.set(e,n),Z.set(n,e)),n}const C=e=>Z.get(e),H=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],j=new Map;function U(e,n){if(!(e instanceof IDBDatabase)||n in e||"string"!=typeof n)return;if(j.get(n))return j.get(n);const o=n.replace(/FromIndex$/,""),r=n!==o,c=K.includes(o);if(!(o in(r?IDBIndex:IDBObjectStore).prototype)||!c&&!H.includes(o))return;const d=function(){var g=(0,v.Z)(function*(O,...h){const D=this.transaction(O,c?"readwrite":"readonly");let k=D.store;return r&&(k=k.index(h.shift())),(yield Promise.all([k[o](...h),c&&D.done]))[0]});return function(h){return g.apply(this,arguments)}}();return j.set(n,d),d}!function l(e){u=e(u)}(e=>({...e,get:(n,o,r)=>U(n,o)||e.get(n,o,r),has:(n,o)=>!!U(n,o)||e.has(n,o)}));var R=s(7579),W=s(9300),Y=s(8675),F=s(3900),G=s(457),Q=s(4004);class N{constructor(n){this.storeName=n,this.changed$=new R.x}get db(){return function $(e,n,{blocked:o,upgrade:r,blocking:c,terminated:d}={}){const g=indexedDB.open(e,n),O=f(g);return r&&g.addEventListener("upgradeneeded",h=>{r(f(g.result),h.oldVersion,h.newVersion,f(g.transaction),h)}),o&&g.addEventListener("blocked",h=>o(h.oldVersion,h.newVersion,h)),O.then(h=>{d&&h.addEventListener("close",()=>d()),c&&h.addEventListener("versionchange",D=>c(D.oldVersion,D.newVersion,D))}).catch(()=>{}),O}("images",1,{upgrade:n=>{n.createObjectStore(this.storeName)}})}getImage$(n){return this.changed$.pipe((0,W.h)(o=>o===n),(0,Y.O)(n),(0,F.w)(o=>(0,G.D)(this.db.then(r=>r.get(this.storeName,`${o}`)))),(0,Q.U)(o=>o||null))}setImage(n,o){var r=this;return(0,v.Z)(function*(){const c=yield r.convertBase64(o);yield(yield r.db).put(r.storeName,c,n),r.changed$.next(n)})()}deleteImage(n){var o=this;return(0,v.Z)(function*(){yield(yield o.db).delete(o.storeName,n),o.changed$.next(n)})()}convertBase64(n){return(0,v.Z)(function*(){return new Promise((o,r)=>{const c=new FileReader;c.readAsDataURL(n),c.onload=()=>{const d=c.result;d?o(d.toString()):r()},c.onerror=d=>{r(d)}})})()}}var a=s(4650);class A{create(n){return new N(n)}}A.\u0275fac=function(n){return new(n||A)},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});var J=s(603),V=s(1135),z=s(1848);function X(e,n){if(1&e){const o=a.EpF();a.TgZ(0,"ion-icon",5),a.NdJ("click",function(){a.CHM(o);const c=a.oxw(2);return a.KtG(c.delete())}),a.qZA()}}function q(e,n){if(1&e&&(a.TgZ(0,"div",2),a._UZ(1,"img",3),a.YNc(2,X,1,0,"ion-icon",4),a.qZA()),2&e){const o=n.ngIf,r=a.oxw();a.xp6(1),a.Q6J("src",o,a.LSH),a.xp6(1),a.Q6J("ngIf",r.editable)}}function tt(e,n){if(1&e){const o=a.EpF();a.TgZ(0,"ion-button",6),a.NdJ("click",function(){a.CHM(o);const c=a.MAs(3),d=a.oxw();return a.KtG(d.editable&&c.click())}),a._UZ(1,"ion-icon",7),a.qZA(),a.TgZ(2,"input",8,9),a.NdJ("change",function(c){a.CHM(o);const d=a.oxw();return a.KtG(d.save(c))}),a.qZA()}}class L{constructor(n){this.imagesService=n,this.editable=!1,this.name$=new V.X(null),this.data$=this.name$.pipe((0,F.w)(o=>o?this.imagesService.getImage$(o):z.C))}set name(n){this.name$.next(n)}save(n){var o=this;return(0,v.Z)(function*(){const r=o.name$.value;r&&o.imagesService.setImage(r,n.target.files[0])})()}delete(){const n=this.name$.value;n&&this.name$.value&&this.imagesService.deleteImage(n)}}L.\u0275fac=function(n){return new(n||L)(a.Y36(N))},L.\u0275cmp=a.Xpm({type:L,selectors:[["bst-avatar"]],inputs:{editable:"editable",name:"name"},standalone:!0,features:[a._Bn([{provide:N,useFactory:e=>e.create("avatars"),deps:[A]}]),a.jDz],decls:4,vars:4,consts:[["class","existing",4,"ngIf","ngIfElse"],["form",""],[1,"existing"],[3,"src"],["name","close-circle","class","delete","color","medium",3,"click",4,"ngIf"],["name","close-circle","color","medium",1,"delete",3,"click"],["fill","clear","color","light",1,"upload",3,"click"],["name","image",1,"upload"],["type","file","accept","image/*",1,"ion-hide",3,"change"],["f",""]],template:function(n,o){if(1&n&&(a.YNc(0,q,3,2,"div",0),a.ALo(1,"async"),a.YNc(2,tt,4,0,"ng-template",null,1,a.W1O)),2&n){const r=a.MAs(3);a.Q6J("ngIf",a.lcZ(1,2,o.data$))("ngIfElse",r)}},dependencies:[b.ez,b.O5,b.Ov,J.Pc,J.YG,J.gu],styles:["[_nghost-%COMP%]{display:block;width:100%;aspect-ratio:1/1;display:flex;flex-direction:column;justify-content:space-around;overflow:hidden;border-radius:5%;background-color:rgb(var(--ion-color-light-rgb),.5)}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;overflow:hidden}.existing[_ngcontent-%COMP%]{width:100%;height:100%}ion-button.upload[_ngcontent-%COMP%], ion-icon.upload[_ngcontent-%COMP%]{width:100%;height:100%}ion-icon.delete[_ngcontent-%COMP%]{position:absolute;right:0;top:0;opacity:.8}"]})},8967:(B,T,s)=>{s.d(T,{s:()=>M});var v=s(6895),b=s(3573),m=s(603),_=s(1135),y=s(9841),x=s(4004),I=s(4782),t=s(4650),w=s(1481);function P(u,l){if(1&u&&t._UZ(0,"span",4),2&u){const i=t.oxw().ngIf,p=t.oxw();t.Q6J("innerHTML",p.listify(i),t.oJD)}}function E(u,l){if(1&u){const i=t.EpF();t.TgZ(0,"span",5),t.NdJ("click",function(){t.CHM(i),t.oxw();const f=t.MAs(8),C=t.oxw();return t.KtG(C.translateOnClick&&f.present())}),t.qZA()}if(2&u){const i=t.oxw().ngIf,p=t.oxw();t.Q6J("innerHTML",p.listify(i),t.oJD)}}function Z(u,l){if(1&u){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",6)(3,"ion-button",7),t.NdJ("click",function(){t.CHM(i),t.oxw();const f=t.MAs(8);return t.KtG(f.dismiss())}),t._uU(4,"abbrechen"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"\xdcbersetzen"),t.qZA(),t.TgZ(7,"ion-buttons",8)(8,"ion-button",9),t.NdJ("click",function(){t.CHM(i);const f=t.MAs(15);t.oxw();const C=t.MAs(8),$=t.oxw();return $.translate($.original,f.value),t.KtG(C.dismiss())}),t._uU(9,"OK"),t.qZA()()()(),t.TgZ(10,"ion-content",10)(11,"ion-item",11),t._uU(12),t.qZA(),t.TgZ(13,"ion-item",11),t._UZ(14,"ion-textarea",12,13),t.qZA()()}if(2&u){const i=t.oxw().ngIf,p=t.oxw();t.xp6(8),t.Q6J("strong",!0),t.xp6(4),t.hij(" ",p.original,""),t.xp6(2),t.Q6J("autoGrow",!0)("value",i)}}function S(u,l){if(1&u&&(t.ynx(0),t.YNc(1,P,1,1,"span",1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,E,1,1,"span",2),t.ALo(5,"async"),t.ALo(6,"async"),t.TgZ(7,"ion-modal",null,3),t.YNc(9,Z,16,4,"ng-template"),t.qZA(),t.BQk()),2&u){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,i.editable$)||!1===t.lcZ(3,4,i.editable$)),t.xp6(3),t.Q6J("ngIf",!0===t.lcZ(5,6,i.editable$)&&!0===t.lcZ(6,8,i.editable$))}}class M{constructor(l,i){this.translationService=l,this.domSanitizer=i,this.translateOnClick=!0,this.original="",this.hasTextChars$=new _.X(!1),this.editable$=(0,y.a)([this.translationService.translationsEditMode$,this.translationService.translatable$,this.hasTextChars$]).pipe((0,x.U)(([p,f,C])=>p&&f&&C))}set text(l){this.original=l,this.hasTextChars$.next(!!l.match("[a-zA-Z]+"))}ngOnChanges(l){const i=l.text;i&&(this.translation$=this.translationService.getTranslation(i.currentValue).pipe((0,I.d)(1)))}translate(l,i){this.translationService.translate(l,i||"")}listify(l){let i=l.replaceAll("<","&lt;").replaceAll(">","&gt;");return[...l.matchAll(/(?:(?:^|\n)(?:- [^\n]+(?:\n|$)*)+)/gm)].forEach(p=>{i=i.replace(p[0],`<ul>${p[0].replaceAll(/(?:^|\n)- (.*)(?:\n|$)/gm,"<li>$1</li>")}</ul>`)}),this.domSanitizer.bypassSecurityTrustHtml(i)}}M.\u0275fac=function(l){return new(l||M)(t.Y36(b.fA),t.Y36(w.H7))},M.\u0275cmp=t.Xpm({type:M,selectors:[["bst-translatable"]],inputs:{text:"text",translateOnClick:"translateOnClick"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML","click",4,"ngIf"],["popover",""],[3,"innerHTML"],[3,"innerHTML","click"],["slot","start"],[3,"click"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],["lines","none"],[3,"autoGrow","value"],["ta",""]],template:function(l,i){1&l&&(t.YNc(0,S,10,10,"ng-container",0),t.ALo(1,"async")),2&l&&t.Q6J("ngIf",t.lcZ(1,1,i.translation$))},dependencies:[v.ez,v.O5,v.Ov,m.Pc,m.YG,m.Sm,m.W2,m.Gu,m.Ie,m.g2,m.wd,m.sr,m.ki,m.j9],styles:["[_nghost-%COMP%]{display:inline-block}span[_ngcontent-%COMP%]{white-space:pre-wrap}ion-item[_ngcontent-%COMP%]{white-space:pre-wrap}ion-textarea[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid var(--ion-color-medium);color:1px solid var(--ion-color-dark);font-family:monospace}"]})},9287:(B,T,s)=>{s.d(T,{j:()=>m});var v=s(4004),b=s(9300);const m=(_,y)=>y.paramMap.pipe((0,v.U)(x=>x.get(_)),(0,b.h)(x=>!!x))},4782:(B,T,s)=>{s.d(T,{d:()=>m});var v=s(4707),b=s(3099);function m(_,y,x){let I,t=!1;return _&&"object"==typeof _?({bufferSize:I=1/0,windowTime:y=1/0,refCount:t=!1,scheduler:x}=_):I=_??1/0,(0,b.B)({connector:()=>new v.t(I,y,x),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:t})}}}]);