"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[3923],{3923:(G,d,c)=>{c.r(d),c.d(d,{MainMenuComponent:()=>Z});var f=c(9671),a=c(6895),_=c(433),C=c(4258),u=c(6248),m=c(5925),n=c(4650),s=c(603),T=c(3905),b=c(9653);function A(e,o){if(1&e&&(n.TgZ(0,"ion-select-option",16),n._uU(1),n.qZA()),2&e){const t=o.$implicit;n.Q6J("value",t.id),n.xp6(1),n.Oqu(null==t?null:t.title)}}function x(e,o){1&e&&(n.ynx(0,17),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"Atacken (A)"),n.qZA(),n._UZ(4,"ion-checkbox",18),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Ballistische F\xe4higkeit (BF)"),n.qZA(),n._UZ(8,"ion-checkbox",19),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Moralwert (MW)"),n.qZA(),n._UZ(12,"ion-checkbox",20),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"R\xfcstungswert (RW)"),n.qZA(),n._UZ(16,"ion-checkbox",21),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"Wiederstand (W)"),n.qZA(),n._UZ(20,"ion-checkbox",22),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Kampfgeschick (KG)"),n.qZA(),n._UZ(24,"ion-checkbox",23),n.qZA(),n.TgZ(25,"ion-item")(26,"ion-label"),n._uU(27,"Lebenspunkte (LP)"),n.qZA(),n._UZ(28,"ion-checkbox",24),n.qZA(),n.TgZ(29,"ion-item")(30,"ion-label"),n._uU(31,"Bewegung (B)"),n.qZA(),n._UZ(32,"ion-checkbox",25),n.qZA(),n.TgZ(33,"ion-item")(34,"ion-label"),n._uU(35,"St\xe4rke (S)"),n.qZA(),n._UZ(36,"ion-checkbox",26),n.qZA(),n.BQk())}function k(e,o){1&e&&(n.ynx(0,27),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"F\xe4higkeiten"),n.qZA(),n._UZ(4,"ion-checkbox",28),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Durchschlag (DS)"),n.qZA(),n._UZ(8,"ion-checkbox",29),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Schadenswert (SW)"),n.qZA(),n._UZ(12,"ion-checkbox",30),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"Reichweite"),n.qZA(),n._UZ(16,"ion-checkbox",31),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"St\xe4rke (S)"),n.qZA(),n._UZ(20,"ion-checkbox",26),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Typ"),n.qZA(),n._UZ(24,"ion-checkbox",32),n.qZA(),n.TgZ(25,"ion-item")(26,"h4"),n._uU(27,"Sonstiges"),n.qZA()(),n.BQk())}function M(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-list",2)(1,"ion-item")(2,"ion-label"),n._uU(3,"Roster"),n.qZA(),n.TgZ(4,"ion-select",3),n.YNc(5,A,2,2,"ion-select-option",4),n.qZA()(),n.TgZ(6,"ion-item")(7,"ion-label")(8,"h4"),n._uU(9,"Einheiten Profile"),n.qZA()(),n.TgZ(10,"ion-checkbox",5,6),n.NdJ("ionChange",function(){n.CHM(t);const r=n.MAs(11),l=n.oxw(2);return n.KtG(l.setUnitProfiles(r.checked))}),n.qZA()(),n.YNc(12,x,37,0,"ng-container",7),n.TgZ(13,"ion-item")(14,"ion-label")(15,"h4"),n._uU(16,"Waffen-Profile"),n.qZA()(),n.TgZ(17,"ion-checkbox",5,8),n.NdJ("ionChange",function(){n.CHM(t);const r=n.MAs(18),l=n.oxw(2);return n.KtG(l.setWeaponProfiles(r.checked))}),n.qZA()(),n.YNc(19,k,28,0,"ng-container",9),n.TgZ(20,"ion-item")(21,"ion-label"),n._uU(22,"Regeln"),n.qZA(),n._UZ(23,"ion-checkbox",10),n.qZA(),n.TgZ(24,"ion-item")(25,"ion-label"),n._uU(26,"Einheiten-Regeln"),n.qZA(),n._UZ(27,"ion-checkbox",11),n.qZA(),n.TgZ(28,"ion-item")(29,"ion-label"),n._uU(30,"Psikr\xe4fte"),n.qZA(),n._UZ(31,"ion-checkbox",12),n.qZA(),n.TgZ(32,"ion-item")(33,"ion-label"),n._uU(34,"Einheiten-Psikr\xe4fte"),n.qZA(),n._UZ(35,"ion-checkbox",13),n.qZA(),n.TgZ(36,"ion-item")(37,"ion-label")(38,"h4"),n._uU(39,"Einstellungen"),n.qZA()()(),n.TgZ(40,"ion-item")(41,"ion-label"),n._uU(42,"Karten-Boxen"),n.qZA(),n._UZ(43,"ion-input",14),n.qZA(),n.TgZ(44,"ion-button",15),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.create())}),n._uU(45,"Deck erstellen"),n.qZA()()}if(2&e){const t=n.MAs(11),i=n.MAs(18),r=n.oxw().ngIf,l=n.oxw();n.Q6J("formGroup",l.form),n.xp6(5),n.Q6J("ngForOf",r),n.xp6(7),n.Q6J("ngIf",t.checked),n.xp6(7),n.Q6J("ngIf",i.checked)}}function U(e,o){if(1&e&&(n.ynx(0),n.YNc(1,M,46,4,"ion-list",1),n.BQk()),2&e){const t=o.ngIf;n.xp6(1),n.Q6J("ngIf",t.length>0)}}class p{constructor(o){this.store$=o,this.form=(0,u.$U)(),this.rosterList$=this.store$.select(m.Bx),this.lessonCreated=new n.vpe}ngOnInit(){var o=this;return(0,f.Z)(function*(){const t=yield(0,T.z)(o.rosterList$);t[0]&&o.form.controls.rosterId.setValue(t[0].id)})()}create(){var o=this;return(0,f.Z)(function*(){if(!o.form.valid)return;const t=(0,u.go)(o.form);if(!t)return;const i=yield(0,T.z)(o.rosterList$);o.store$.dispatch((0,u.kW)({settings:{...t,name:i.find(r=>r.id===t.rosterId)?.title||"unknown roster"}})),o.lessonCreated.next()})()}setUnitProfiles(o){this.form.controls.unitProfiles.controls.attacks.setValue(o),this.form.controls.unitProfiles.controls.ballisticSkill.setValue(o),this.form.controls.unitProfiles.controls.leadership.setValue(o),this.form.controls.unitProfiles.controls.movement.setValue(o),this.form.controls.unitProfiles.controls.save.setValue(o),this.form.controls.unitProfiles.controls.strength.setValue(o),this.form.controls.unitProfiles.controls.toughness.setValue(o),this.form.controls.unitProfiles.controls.weaponSkill.setValue(o),this.form.controls.unitProfiles.controls.wounds.setValue(o)}setWeaponProfiles(o){this.form.controls.weaponProfiles.controls.abilities.setValue(o),this.form.controls.weaponProfiles.controls.armourPenetration.setValue(o),this.form.controls.weaponProfiles.controls.damage.setValue(o),this.form.controls.weaponProfiles.controls.range.setValue(o),this.form.controls.weaponProfiles.controls.strength.setValue(o),this.form.controls.weaponProfiles.controls.type.setValue(o)}}p.\u0275fac=function(o){return new(o||p)(n.Y36(b.yh))},p.\u0275cmp=n.Xpm({type:p,selectors:[["bst-flash-card-lesson-form"]],outputs:{lessonCreated:"lessonCreated"},standalone:!0,features:[n.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formControlName","rosterId"],[3,"value",4,"ngFor","ngForOf"],[3,"ionChange"],["unitProfileToggle",""],["formGroupName","unitProfiles",4,"ngIf"],["weaponProfileToggle",""],["formGroupName","weaponProfiles",4,"ngIf"],["formControlName","rules"],["formControlName","unitRules"],["formControlName","psychicPowers"],["formControlName","unitPsychicPowers"],["formControlName","boxes","type","number","inputmode","numeric","value","3"],["expand","full",3,"click"],[3,"value"],["formGroupName","unitProfiles"],["formControlName","attacks"],["formControlName","ballisticSkill"],["formControlName","leadership"],["formControlName","save"],["formControlName","toughness"],["formControlName","weaponSkill"],["formControlName","wounds"],["formControlName","movement"],["formControlName","strength"],["formGroupName","weaponProfiles"],["formControlName","abilities"],["formControlName","armourPenetration"],["formControlName","damage"],["formControlName","range"],["formControlName","type"]],template:function(o,t){1&o&&(n.YNc(0,U,2,1,"ng-container",0),n.ALo(1,"async")),2&o&&n.Q6J("ngIf",n.lcZ(1,1,t.rosterList$))},dependencies:[a.ez,a.sg,a.O5,a.Ov,_.UX,_.JJ,_.JL,_.sg,_.u,_.x0,s.Pc,s.YG,s.nz,s.pK,s.Ie,s.Q$,s.q_,s.t9,s.n0,s.w,s.as,s.QI,u.W8],styles:["[_nghost-%COMP%]{display:block}"]});var q=c(3573),v=c(4004);class g{constructor(o,t){this.translationsService=o,this.actionSheetCtrl=t,this.flags=this.translationsService.languages,this.selectedFlag$=this.translationsService.selectedLanguage$.pipe((0,v.U)(i=>this.flags[i].flag))}selectLanguage(){var o=this;return(0,f.Z)(function*(){(yield o.actionSheetCtrl.create({header:"Sprache w\xe4hlen",buttons:Object.keys(o.flags).map(i=>({text:o.flags[i].flag+" "+o.flags[i].name,handler:()=>{o.translationsService.setLanguage(i)}}))})).present()})()}exportTranslations(){this.translationsService.export()}importTranslations(o){var t=this;return(0,f.Z)(function*(){const i=o.target,r=i.files;if(!i||!r)return;const l=r[0];l&&t.translationsService.import(l)})()}}g.\u0275fac=function(o){return new(o||g)(n.Y36(q.fA),n.Y36(s.BX))},g.\u0275cmp=n.Xpm({type:g,selectors:[["bst-translation-settings"]],standalone:!0,features:[n.jDz],decls:27,vars:6,consts:[[3,"click"],["name","save-outline"],["name","folder-open-outline"],["type","file","accept","application/json",1,"ion-hide",3,"change"],["i",""],[3,"checked","ionChange"],["tt",""]],template:function(o,t){if(1&o){const i=n.EpF();n.TgZ(0,"ion-footer")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"\xdcbersetzen"),n.qZA()(),n.TgZ(4,"ion-toolbar")(5,"ion-buttons")(6,"ion-button",0),n.NdJ("click",function(){return t.selectLanguage()}),n._uU(7),n.ALo(8,"async"),n.qZA(),n.TgZ(9,"span")(10,"ion-button",0),n.NdJ("click",function(){return t.exportTranslations()}),n._UZ(11,"ion-icon",1),n.qZA(),n.TgZ(12,"ion-label"),n._uU(13,"Export"),n.qZA()(),n.TgZ(14,"span")(15,"ion-button",0),n.NdJ("click",function(){n.CHM(i);const l=n.MAs(20);return n.KtG(l.click())}),n._UZ(16,"ion-icon",2),n.qZA(),n.TgZ(17,"ion-label"),n._uU(18,"Import"),n.qZA(),n.TgZ(19,"input",3,4),n.NdJ("change",function(l){return t.importTranslations(l)}),n.qZA()(),n.TgZ(21,"span")(22,"ion-toggle",5,6),n.NdJ("ionChange",function(){n.CHM(i);const l=n.MAs(23);return n.KtG(t.translationsService.setTranslationsEditMode(l.checked))}),n.ALo(24,"async"),n.qZA(),n.TgZ(25,"ion-label"),n._uU(26,"Bearbeiten"),n.qZA()()()()()}2&o&&(n.xp6(7),n.hij(" ",n.lcZ(8,2,t.selectedFlag$)," "),n.xp6(15),n.Q6J("checked",n.lcZ(24,4,t.translationsService.translationsEditMode$)))},dependencies:[a.ez,a.Ov,s.Pc,s.YG,s.Sm,s.fr,s.gu,s.Q$,s.wd,s.ho,s.sr,s.w],styles:["ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]:last-of-type{padding-bottom:50px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:flex-start}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}"]});const F=["modal"];function P(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-button",15),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,l=n.oxw();return n.KtG(l.updateFile(r.id))}),n._UZ(1,"ion-icon",17),n.qZA()}}const N=function(e){return["roster",e]};function y(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-item")(1,"ion-label",12),n._UZ(2,"ion-icon",1),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",13),n.YNc(5,P,2,0,"ion-button",14),n.TgZ(6,"ion-button",15),n.NdJ("click",function(){const l=n.CHM(t).$implicit,h=n.oxw();return n.KtG(h.deleteRoster(l.id))}),n._UZ(7,"ion-icon",16),n.qZA()()()}if(2&e){const t=o.$implicit;n.xp6(1),n.Q6J("routerLink",n.VKq(3,N,t.id)),n.xp6(2),n.hij(" ",t.title," "),n.xp6(2),n.Q6J("ngIf",t.canUpdate)}}function L(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-button",18),n.NdJ("click",function(){n.CHM(t),n.oxw();const r=n.MAs(33);return n.KtG(r.isOpen=!0)}),n._UZ(1,"ion-icon",19),n.qZA()}}function w(e,o){if(1&e&&(n.TgZ(0,"div",23),n._UZ(1,"ion-icon",24),n.TgZ(2,"ion-badge",25),n._uU(3),n.qZA()()),2&e){const t=o.$implicit,i=o.index,r=n.oxw().$implicit;n.xp6(1),n.Q6J("name",0===t?"file-tray-outline":"file-tray-full-outline"),n.xp6(1),n.Q6J("color",r.boxContent.length-1===i?"success":"medium"),n.xp6(1),n.Oqu(t)}}const J=function(e){return["flash-card-lesson",e]};function O(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-item")(1,"div",20),n._uU(2),n.qZA(),n.TgZ(3,"div",21),n.YNc(4,w,4,3,"div",22),n.qZA(),n.TgZ(5,"ion-button",18),n.NdJ("click",function(){const l=n.CHM(t).$implicit,h=n.oxw();return n.KtG(h.deleteDeck(l.deckId))}),n._UZ(6,"ion-icon",16),n.qZA()()}if(2&e){const t=o.$implicit;n.xp6(1),n.Q6J("routerLink",n.VKq(3,J,t.deckId)),n.xp6(1),n.hij(" ",t.name," "),n.xp6(2),n.Q6J("ngForOf",t.boxContent)}}function $(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-content")(1,"ion-header")(2,"ion-toolbar")(3,"ion-title")(4,"h1"),n._uU(5,"Deck erstellen"),n.qZA()(),n.TgZ(6,"ion-buttons",13)(7,"ion-button",26),n.NdJ("click",function(){n.CHM(t),n.oxw();const r=n.MAs(33);return n.KtG(r.isOpen=!1)}),n._UZ(8,"ion-icon",27),n.qZA()()()(),n.TgZ(9,"bst-flash-card-lesson-form",28),n.NdJ("lessonCreated",function(){n.CHM(t),n.oxw();const r=n.MAs(33);return n.KtG(r.isOpen=!1)}),n.qZA()()}}class Z{constructor(o){this.store$=o,this.rosterList$=this.store$.select(m.Bx),this.deckList$=this.store$.select(u.Bx)}saveFile(o){var t=this;return(0,f.Z)(function*(){const i=o.target,r=i.files;if(!i||!r)return;const l=r[0];l&&t.store$.dispatch((0,m.Q8)({file:l}))})()}linkFile(o){this.store$.dispatch((0,m.Pe)({url:o}))}updateFile(o){var t=this;return(0,f.Z)(function*(){t.store$.dispatch((0,m.EM)({id:o}))})()}deleteRoster(o){this.store$.dispatch((0,m.ax)({id:o}))}deleteDeck(o){this.store$.dispatch((0,u.Ek)({id:o}))}}Z.\u0275fac=function(o){return new(o||Z)(n.Y36(b.yh))},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["ng-component"]],viewQuery:function(o,t){if(1&o&&n.Gf(F,5),2&o){let i;n.iGM(i=n.CRH())&&(t.modal=i.first)}},standalone:!0,features:[n.jDz],decls:35,vars:10,consts:[[1,"add-roster"],["color","primary","slot","start","name","document-outline"],["fill","outline",3,"click"],["type","file",1,"ion-hide",3,"change"],["f",""],["type","text"],["u",""],["slot","end","fill","outline",3,"click"],[4,"ngFor","ngForOf"],["slot","end","fill","clear",3,"click",4,"ngIf"],[3,"isOpen"],["modal",""],[3,"routerLink"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],["fill","clear",3,"click"],["color","primary","name","trash"],["color","primary","name","reload"],["slot","end","fill","clear",3,"click"],["name","add"],["slot","start",3,"routerLink"],[1,"boxes"],["class","box",4,"ngFor","ngForOf"],[1,"box"],[3,"name"],[3,"color"],[3,"click"],["name","close"],[3,"lessonCreated"]],template:function(o,t){if(1&o){const i=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"BattleScribe Tools"),n.qZA()()(),n.TgZ(4,"ion-content")(5,"ion-item-divider"),n._uU(6,"Roster"),n.qZA(),n.TgZ(7,"ion-item",0)(8,"ion-label"),n._UZ(9,"ion-icon",1),n._uU(10," Neue Datei (exportierte .rosz Datei) "),n.qZA(),n.TgZ(11,"ion-button",2),n.NdJ("click",function(){n.CHM(i);const l=n.MAs(14);return n.KtG(l.click())}),n._uU(12,"w\xe4hlen..."),n.qZA(),n.TgZ(13,"input",3,4),n.NdJ("change",function(l){n.CHM(i);const h=n.MAs(14);return t.saveFile(l),n.KtG(h.value="")}),n.qZA()(),n.TgZ(15,"ion-item",0)(16,"ion-label"),n._UZ(17,"ion-icon",1),n._uU(18," URL laden "),n.qZA(),n._UZ(19,"input",5,6),n.TgZ(21,"ion-button",7),n.NdJ("click",function(){n.CHM(i);const l=n.MAs(20);return n.KtG(t.linkFile(l.value))}),n._uU(22,"laden..."),n.qZA()(),n.YNc(23,y,8,5,"ion-item",8),n.ALo(24,"async"),n.TgZ(25,"ion-item-divider"),n._uU(26," Flash Card Decks "),n.YNc(27,L,2,0,"ion-button",9),n.ALo(28,"async"),n.qZA(),n.YNc(29,O,7,5,"ion-item",8),n.ALo(30,"async"),n.qZA(),n._UZ(31,"bst-translation-settings"),n.TgZ(32,"ion-modal",10,11),n.YNc(34,$,10,0,"ng-template"),n.qZA()}if(2&o){let i;n.xp6(23),n.Q6J("ngForOf",n.lcZ(24,4,t.rosterList$)),n.xp6(4),n.Q6J("ngIf",null==(i=n.lcZ(28,6,t.rosterList$))?null:i.length),n.xp6(2),n.Q6J("ngForOf",n.lcZ(30,8,t.deckList$)),n.xp6(3),n.Q6J("isOpen",!1)}},dependencies:[a.ez,a.sg,a.O5,a.Ov,_.UX,C.Bz,C.rH,s.Pc,s.yp,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.Ie,s.rH,s.Q$,s.wd,s.sr,s.ki,s.YI,m.hg,u.W8,g,p],styles:[".boxes[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.boxes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;height:20px}ion-item-divider[_ngcontent-%COMP%]:not(:first-of-type){margin-top:50px}.add-roster[_ngcontent-%COMP%]{--background: var(--ion-color-light)}"]})}}]);