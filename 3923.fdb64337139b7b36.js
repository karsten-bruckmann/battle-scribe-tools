"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[3923],{3923:(S,d,l)=>{l.r(d),l.d(d,{MainMenuComponent:()=>Z});var g=l(9671),c=l(6895),_=l(433),C=l(4258),m=l(807),u=l(3761),b=l(9024),n=l(4650),i=l(603),x=l(9653);function A(e,t){1&e&&(n.ynx(0,14),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"Atacken (A)"),n.qZA(),n._UZ(4,"ion-checkbox",15),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Ballistische F\xe4higkeit (BF)"),n.qZA(),n._UZ(8,"ion-checkbox",16),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Moralwert (MW)"),n.qZA(),n._UZ(12,"ion-checkbox",17),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"R\xfcstungswert (RW)"),n.qZA(),n._UZ(16,"ion-checkbox",18),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"Wiederstand (W)"),n.qZA(),n._UZ(20,"ion-checkbox",19),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Kampfgeschick (KG)"),n.qZA(),n._UZ(24,"ion-checkbox",20),n.qZA(),n.TgZ(25,"ion-item")(26,"ion-label"),n._uU(27,"Lebenspunkte (LP)"),n.qZA(),n._UZ(28,"ion-checkbox",21),n.qZA(),n.TgZ(29,"ion-item")(30,"ion-label"),n._uU(31,"Bewegung (B)"),n.qZA(),n._UZ(32,"ion-checkbox",22),n.qZA(),n.TgZ(33,"ion-item")(34,"ion-label"),n._uU(35,"St\xe4rke (S)"),n.qZA(),n._UZ(36,"ion-checkbox",23),n.qZA(),n.BQk())}function T(e,t){1&e&&(n.ynx(0,24),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"F\xe4higkeiten"),n.qZA(),n._UZ(4,"ion-checkbox",25),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Durchschlag (DS)"),n.qZA(),n._UZ(8,"ion-checkbox",26),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Schadenswert (SW)"),n.qZA(),n._UZ(12,"ion-checkbox",27),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"Reichweite"),n.qZA(),n._UZ(16,"ion-checkbox",28),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"St\xe4rke (S)"),n.qZA(),n._UZ(20,"ion-checkbox",23),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Typ"),n.qZA(),n._UZ(24,"ion-checkbox",29),n.qZA(),n.TgZ(25,"ion-item")(26,"h4"),n._uU(27,"Sonstiges"),n.qZA()(),n.BQk())}function M(e,t){if(1&e){const o=n.EpF();n.TgZ(0,"ion-list",2)(1,"ion-item")(2,"ion-label")(3,"h4"),n._uU(4,"Einheiten Profile"),n.qZA()(),n.TgZ(5,"ion-checkbox",3,4),n.NdJ("ionChange",function(){n.CHM(o);const r=n.MAs(6),a=n.oxw(2);return n.KtG(a.setUnitProfiles(r.checked))}),n.qZA()(),n.YNc(7,A,37,0,"ng-container",5),n.TgZ(8,"ion-item")(9,"ion-label")(10,"h4"),n._uU(11,"Waffen-Profile"),n.qZA()(),n.TgZ(12,"ion-checkbox",3,6),n.NdJ("ionChange",function(){n.CHM(o);const r=n.MAs(13),a=n.oxw(2);return n.KtG(a.setWeaponProfiles(r.checked))}),n.qZA()(),n.YNc(14,T,28,0,"ng-container",7),n.TgZ(15,"ion-item")(16,"ion-label"),n._uU(17,"Regeln"),n.qZA(),n._UZ(18,"ion-checkbox",8),n.qZA(),n.TgZ(19,"ion-item")(20,"ion-label"),n._uU(21,"Einheiten-Regeln"),n.qZA(),n._UZ(22,"ion-checkbox",9),n.qZA(),n.TgZ(23,"ion-item")(24,"ion-label"),n._uU(25,"Psikr\xe4fte"),n.qZA(),n._UZ(26,"ion-checkbox",10),n.qZA(),n.TgZ(27,"ion-item")(28,"ion-label"),n._uU(29,"Einheiten-Psikr\xe4fte"),n.qZA(),n._UZ(30,"ion-checkbox",11),n.qZA(),n.TgZ(31,"ion-item")(32,"ion-label")(33,"h4"),n._uU(34,"Einstellungen"),n.qZA()()(),n.TgZ(35,"ion-item")(36,"ion-label"),n._uU(37,"Karten-Boxen"),n.qZA(),n._UZ(38,"ion-input",12),n.qZA(),n.TgZ(39,"ion-button",13),n.NdJ("click",function(){n.CHM(o);const r=n.oxw(2);return n.KtG(r.create())}),n._uU(40,"Deck erstellen"),n.qZA()()}if(2&e){const o=n.MAs(6),s=n.MAs(13),r=n.oxw(2);n.Q6J("formGroup",r.form),n.xp6(7),n.Q6J("ngIf",o.checked),n.xp6(7),n.Q6J("ngIf",s.checked)}}function k(e,t){if(1&e&&(n.ynx(0),n.YNc(1,M,41,3,"ion-list",1),n.BQk()),2&e){const o=t.ngIf;n.xp6(1),n.Q6J("ngIf",o.length>0)}}class p{constructor(t){this.store$=t,this.form=(0,m.$U)(),this.rosterList$=this.store$.select(u.Bx),this.lessonCreated=new n.vpe}set rosterId(t){this.form.controls.rosterId.setValue(t)}create(){var t=this;return(0,g.Z)(function*(){if(!t.form.valid)return;const o=(0,m.go)(t.form);o&&(t.store$.dispatch((0,m.kW)({settings:{...o}})),t.lessonCreated.next())})()}setUnitProfiles(t){this.form.controls.unitProfiles.controls.attacks.setValue(t),this.form.controls.unitProfiles.controls.ballisticSkill.setValue(t),this.form.controls.unitProfiles.controls.leadership.setValue(t),this.form.controls.unitProfiles.controls.movement.setValue(t),this.form.controls.unitProfiles.controls.save.setValue(t),this.form.controls.unitProfiles.controls.strength.setValue(t),this.form.controls.unitProfiles.controls.toughness.setValue(t),this.form.controls.unitProfiles.controls.weaponSkill.setValue(t),this.form.controls.unitProfiles.controls.wounds.setValue(t)}setWeaponProfiles(t){this.form.controls.weaponProfiles.controls.abilities.setValue(t),this.form.controls.weaponProfiles.controls.armourPenetration.setValue(t),this.form.controls.weaponProfiles.controls.damage.setValue(t),this.form.controls.weaponProfiles.controls.range.setValue(t),this.form.controls.weaponProfiles.controls.strength.setValue(t),this.form.controls.weaponProfiles.controls.type.setValue(t)}}p.\u0275fac=function(t){return new(t||p)(n.Y36(x.yh))},p.\u0275cmp=n.Xpm({type:p,selectors:[["bst-flash-card-lesson-form"]],inputs:{rosterId:"rosterId"},outputs:{lessonCreated:"lessonCreated"},standalone:!0,features:[n.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"ionChange"],["unitProfileToggle",""],["formGroupName","unitProfiles",4,"ngIf"],["weaponProfileToggle",""],["formGroupName","weaponProfiles",4,"ngIf"],["formControlName","rules"],["formControlName","unitRules"],["formControlName","psychicPowers"],["formControlName","unitPsychicPowers"],["formControlName","boxes","type","number","inputmode","numeric","value","3"],["expand","full",3,"click"],["formGroupName","unitProfiles"],["formControlName","attacks"],["formControlName","ballisticSkill"],["formControlName","leadership"],["formControlName","save"],["formControlName","toughness"],["formControlName","weaponSkill"],["formControlName","wounds"],["formControlName","movement"],["formControlName","strength"],["formGroupName","weaponProfiles"],["formControlName","abilities"],["formControlName","armourPenetration"],["formControlName","damage"],["formControlName","range"],["formControlName","type"]],template:function(t,o){1&t&&(n.YNc(0,k,2,1,"ng-container",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,o.rosterList$))},dependencies:[c.ez,c.O5,c.Ov,_.UX,_.JJ,_.JL,_.sg,_.u,_.x0,i.Pc,i.YG,i.nz,i.pK,i.Ie,i.Q$,i.q_,i.w,i.as,m.W8],styles:["[_nghost-%COMP%]{display:block}"]});var U=l(391),q=l(3573),P=l(4004);class h{constructor(t,o){this.translationsService=t,this.actionSheetCtrl=o,this.flags=this.translationsService.languages,this.selectedFlag$=this.translationsService.selectedLanguage$.pipe((0,P.U)(s=>this.flags[s].flag))}selectLanguage(){var t=this;return(0,g.Z)(function*(){(yield t.actionSheetCtrl.create({header:"Sprache w\xe4hlen",buttons:Object.keys(t.flags).map(s=>({text:t.flags[s].flag+" "+t.flags[s].name,handler:()=>{t.translationsService.setLanguage(s)}}))})).present()})()}exportTranslations(){this.translationsService.export()}importTranslations(t){var o=this;return(0,g.Z)(function*(){const s=t.target,r=s.files;if(!s||!r)return;const a=r[0];a&&o.translationsService.import(a)})()}}h.\u0275fac=function(t){return new(t||h)(n.Y36(q.fA),n.Y36(i.BX))},h.\u0275cmp=n.Xpm({type:h,selectors:[["bst-translation-settings"]],standalone:!0,features:[n.jDz],decls:27,vars:6,consts:[[3,"click"],["name","save-outline"],["name","folder-open-outline"],["type","file","accept","application/json",1,"ion-hide",3,"change"],["i",""],[3,"checked","ionChange"],["tt",""]],template:function(t,o){if(1&t){const s=n.EpF();n.TgZ(0,"ion-footer")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"\xdcbersetzen"),n.qZA()(),n.TgZ(4,"ion-toolbar")(5,"ion-buttons")(6,"ion-button",0),n.NdJ("click",function(){return o.selectLanguage()}),n._uU(7),n.ALo(8,"async"),n.qZA(),n.TgZ(9,"span")(10,"ion-button",0),n.NdJ("click",function(){return o.exportTranslations()}),n._UZ(11,"ion-icon",1),n.qZA(),n.TgZ(12,"ion-label"),n._uU(13,"Export"),n.qZA()(),n.TgZ(14,"span")(15,"ion-button",0),n.NdJ("click",function(){n.CHM(s);const a=n.MAs(20);return n.KtG(a.click())}),n._UZ(16,"ion-icon",2),n.qZA(),n.TgZ(17,"ion-label"),n._uU(18,"Import"),n.qZA(),n.TgZ(19,"input",3,4),n.NdJ("change",function(a){return o.importTranslations(a)}),n.qZA()(),n.TgZ(21,"span")(22,"ion-toggle",5,6),n.NdJ("ionChange",function(){n.CHM(s);const a=n.MAs(23);return n.KtG(o.translationsService.setTranslationsEditMode(a.checked))}),n.ALo(24,"async"),n.qZA(),n.TgZ(25,"ion-label"),n._uU(26,"Bearbeiten"),n.qZA()()()()()}2&t&&(n.xp6(7),n.hij(" ",n.lcZ(8,2,o.selectedFlag$)," "),n.xp6(15),n.Q6J("checked",n.lcZ(24,4,o.translationsService.translationsEditMode$)))},dependencies:[c.ez,c.Ov,i.Pc,i.YG,i.Sm,i.fr,i.gu,i.Q$,i.wd,i.ho,i.sr,i.w],styles:["ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]:last-of-type{padding-bottom:50px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:flex-start}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}"]});const v=["modal"];function y(e,t){1&e&&(n.TgZ(0,"ion-item")(1,"ion-label"),n._UZ(2,"bst-translatable",11),n.qZA(),n._UZ(3,"ion-icon",12),n.qZA())}function N(e,t){1&e&&n._UZ(0,"bst-avatar",19),2&e&&n.Q6J("name",t.ngIf.title)}function F(e,t){1&e&&n._UZ(0,"ion-icon",20)}function O(e,t){if(1&e&&(n.TgZ(0,"div",24),n._UZ(1,"ion-icon",25),n.TgZ(2,"ion-badge",0),n._uU(3),n.qZA()()),2&e){const o=t.$implicit,s=t.index,r=n.oxw().$implicit;n.xp6(1),n.Q6J("name",0===o?"file-tray-outline":"file-tray-full-outline"),n.xp6(1),n.Q6J("color",r.boxContent.length-1===s?"success":"medium"),n.xp6(1),n.Oqu(o)}}const w=function(e){return["flash-card-lesson",e]};function L(e,t){if(1&e){const o=n.EpF();n.TgZ(0,"ion-item")(1,"div",21),n.YNc(2,O,4,3,"div",22),n.qZA(),n.TgZ(3,"ion-buttons",2)(4,"ion-button",3),n.NdJ("click",function(){const a=n.CHM(o).$implicit,f=n.oxw(2);return n.KtG(f.deleteDeck(a.deckId))}),n._UZ(5,"ion-icon",23),n.qZA()()()}if(2&e){const o=t.$implicit;n.xp6(1),n.Q6J("routerLink",n.VKq(2,w,o.deckId)),n.xp6(1),n.Q6J("ngForOf",o.boxContent)}}const J=function(e){return["roster",e]},$=function(){return{}};function I(e,t){if(1&e){const o=n.EpF();n.TgZ(0,"ion-card")(1,"ion-item",13),n.YNc(2,N,1,1,"bst-avatar",14),n.YNc(3,F,1,0,"ng-template",null,15,n.W1O),n.TgZ(5,"ion-label",16)(6,"h2"),n._uU(7),n.qZA()(),n.TgZ(8,"ion-buttons",2)(9,"ion-button",3),n.NdJ("click",function(){const a=n.CHM(o).$implicit,f=n.oxw(),G=n.MAs(22);return f.createLessonForRoster=a.id,n.KtG(G.isOpen=!0)}),n._UZ(10,"ion-icon",17),n.qZA(),n.TgZ(11,"ion-button",3),n.NdJ("click",function(){const a=n.CHM(o).$implicit,f=n.oxw();return n.KtG(f.deleteRoster(a.id))}),n._UZ(12,"ion-icon",18),n.qZA()()(),n.TgZ(13,"ion-list"),n.YNc(14,L,6,4,"ion-item",8),n.ALo(15,"async"),n.qZA()()}if(2&e){const o=t.$implicit,s=n.MAs(4),r=n.oxw();n.xp6(2),n.Q6J("ngIf",o.warlord)("ngIfElse",s),n.xp6(3),n.Q6J("routerLink",n.VKq(7,J,o.id)),n.xp6(2),n.Oqu(o.title),n.xp6(7),n.Q6J("ngForOf",(n.lcZ(15,5,r.deckList$)||n.DdM(9,$))[o.id])}}function Q(e,t){if(1&e){const o=n.EpF();n.TgZ(0,"ion-content")(1,"ion-header")(2,"ion-toolbar")(3,"ion-title")(4,"h1"),n._uU(5,"Deck erstellen"),n.qZA()(),n.TgZ(6,"ion-buttons",2)(7,"ion-button",26),n.NdJ("click",function(){n.CHM(o),n.oxw();const r=n.MAs(22);return n.KtG(r.isOpen=!1)}),n._UZ(8,"ion-icon",27),n.qZA()()()(),n.TgZ(9,"bst-flash-card-lesson-form",28),n.NdJ("lessonCreated",function(){n.CHM(o),n.oxw();const r=n.MAs(22);return n.KtG(r.isOpen=!1)}),n.qZA()()}if(2&e){const o=n.oxw();n.xp6(9),n.Q6J("rosterId",o.createLessonForRoster)}}class Z{constructor(t){this.store$=t,this.rosterList$=this.store$.select(u.Bx),this.deckList$=this.store$.select(m.Bx),this.createLessonForRoster=null}saveFile(t){var o=this;return(0,g.Z)(function*(){const s=t.target,r=s.files;if(!s||!r)return;const a=r[0];a&&o.store$.dispatch((0,u.Q8)({file:a}))})()}linkFile(t){this.store$.dispatch((0,u.Pe)({url:t}))}updateFile(t){var o=this;return(0,g.Z)(function*(){o.store$.dispatch((0,u.EM)({id:t}))})()}deleteRoster(t){this.store$.dispatch((0,u.ax)({id:t}))}deleteDeck(t){this.store$.dispatch((0,m.Ek)({id:t}))}}Z.\u0275fac=function(t){return new(t||Z)(n.Y36(x.yh))},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&n.Gf(v,5),2&t){let s;n.iGM(s=n.CRH())&&(o.modal=s.first)}},standalone:!0,features:[n.jDz],decls:24,vars:8,consts:[[3,"color"],["text","Amies"],["slot","end"],["fill","clear",3,"click"],["name","add"],["type","file",1,"ion-hide",3,"change"],["f",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"isOpen"],["modal",""],["text","No Army. Add one by clicking on the '+' above."],["color","medium","name","return-up-back-outline"],[1,"roster"],["slot","","start","",3,"name",4,"ngIf","ngIfElse"],["noWarlord",""],[3,"routerLink"],["color","primary","name","file-tray-full"],["color","primary","name","trash"],["slot","","start","",3,"name"],["color","primary","slot","start","name","document-outline"],[1,"boxes",3,"routerLink"],["class","box",4,"ngFor","ngForOf"],["color","primary","name","trash-outline"],[1,"box"],[3,"name"],[3,"click"],["name","close"],[3,"rosterId","lessonCreated"]],template:function(t,o){if(1&t){const s=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"h1"),n._uU(4,"Battle Companion"),n.qZA()()()(),n.TgZ(5,"ion-content")(6,"ion-list")(7,"ion-item-divider")(8,"ion-text",0)(9,"h3"),n._UZ(10,"bst-translatable",1),n.qZA()(),n.TgZ(11,"ion-buttons",2)(12,"ion-button",3),n.NdJ("click",function(){n.CHM(s);const a=n.MAs(15);return n.KtG(a.click())}),n._UZ(13,"ion-icon",4),n.qZA(),n.TgZ(14,"input",5,6),n.NdJ("change",function(a){n.CHM(s);const f=n.MAs(15);return o.saveFile(a),n.KtG(f.value="")}),n.qZA()()(),n.YNc(16,y,4,0,"ion-item",7),n.ALo(17,"async"),n.YNc(18,I,16,10,"ion-card",8),n.ALo(19,"async"),n.qZA()(),n._UZ(20,"bst-translation-settings"),n.TgZ(21,"ion-modal",9,10),n.YNc(23,Q,10,1,"ng-template"),n.qZA()}if(2&t){let s;n.xp6(8),n.Q6J("color","primary"),n.xp6(8),n.Q6J("ngIf",0===(null==(s=n.lcZ(17,4,o.rosterList$))?null:s.length)),n.xp6(2),n.Q6J("ngForOf",n.lcZ(19,6,o.rosterList$)),n.xp6(3),n.Q6J("isOpen",!1)}},dependencies:[c.ez,c.sg,c.O5,c.Ov,_.UX,C.Bz,C.rH,i.Pc,i.yp,i.YG,i.Sm,i.PM,i.W2,i.Gu,i.gu,i.Ie,i.rH,i.Q$,i.q_,i.yW,i.wd,i.sr,i.ki,i.YI,u.hg,m.W8,U.s,h,p,b.A],styles:[".boxes[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:space-between}.boxes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;height:20px}ion-item-divider[_ngcontent-%COMP%]{margin-top:30px}.add-roster[_ngcontent-%COMP%]{--background: var(--ion-color-light)}ion-label[_ngcontent-%COMP%]{font-size:2em}ion-item-divider[_ngcontent-%COMP%]{--padding-top: 3px;--padding-bottom: 3px}ion-icon[name=return-up-back-outline][_ngcontent-%COMP%]{transform:rotate(90deg);margin-bottom:21px;margin-top:3px;margin-right:6px}ion-list[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{margin-left:48px}bst-avatar[_ngcontent-%COMP%]{width:50px}ion-item.roster[_ngcontent-%COMP%]{--padding-start: 0}ion-item.roster[_ngcontent-%COMP%]   bst-avatar[_ngcontent-%COMP%]{margin:5px}"]})}}]);