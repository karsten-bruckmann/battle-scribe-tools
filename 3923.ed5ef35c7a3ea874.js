"use strict";(self.webpackChunkbattle_cards=self.webpackChunkbattle_cards||[]).push([[3923],{3923:(O,d,a)=>{a.r(d),a.d(d,{MainMenuComponent:()=>g});var m=a(9671),c=a(6895),u=a(433),C=a(1545),_=a(1773),h=a(9652),n=a(4650),i=a(603),T=a(3905);function A(s,e){if(1&s&&(n.TgZ(0,"ion-select-option",14),n._uU(1),n.qZA()),2&s){const o=e.$implicit;n.Q6J("value",e.index),n.xp6(1),n.Oqu(null==o?null:o.title)}}function b(s,e){1&s&&(n.ynx(0,15),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"Atacken (A)"),n.qZA(),n._UZ(4,"ion-checkbox",16),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Ballistische F\xe4higkeit (BF)"),n.qZA(),n._UZ(8,"ion-checkbox",17),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Moralwert (MW)"),n.qZA(),n._UZ(12,"ion-checkbox",18),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"R\xfcstungswert (RW)"),n.qZA(),n._UZ(16,"ion-checkbox",19),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"Wiederstand (W)"),n.qZA(),n._UZ(20,"ion-checkbox",20),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Kampfgeschick (KG)"),n.qZA(),n._UZ(24,"ion-checkbox",21),n.qZA(),n.TgZ(25,"ion-item")(26,"ion-label"),n._uU(27,"Lebenspunkte (LP)"),n.qZA(),n._UZ(28,"ion-checkbox",22),n.qZA(),n.TgZ(29,"ion-item")(30,"ion-label"),n._uU(31,"Bewegung (B)"),n.qZA(),n._UZ(32,"ion-checkbox",23),n.qZA(),n.TgZ(33,"ion-item")(34,"ion-label"),n._uU(35,"St\xe4rke (S)"),n.qZA(),n._UZ(36,"ion-checkbox",24),n.qZA(),n.BQk())}function k(s,e){1&s&&(n.ynx(0,25),n.TgZ(1,"ion-item")(2,"ion-label"),n._uU(3,"F\xe4higkeiten"),n.qZA(),n._UZ(4,"ion-checkbox",26),n.qZA(),n.TgZ(5,"ion-item")(6,"ion-label"),n._uU(7,"Durchschlag (DS)"),n.qZA(),n._UZ(8,"ion-checkbox",27),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Schadenswert (SW)"),n.qZA(),n._UZ(12,"ion-checkbox",28),n.qZA(),n.TgZ(13,"ion-item")(14,"ion-label"),n._uU(15,"Reichweite"),n.qZA(),n._UZ(16,"ion-checkbox",29),n.qZA(),n.TgZ(17,"ion-item")(18,"ion-label"),n._uU(19,"St\xe4rke (S)"),n.qZA(),n._UZ(20,"ion-checkbox",24),n.qZA(),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Typ"),n.qZA(),n._UZ(24,"ion-checkbox",30),n.qZA(),n.TgZ(25,"ion-item")(26,"h4"),n._uU(27,"Sonstiges"),n.qZA()(),n.BQk())}const U=function(){return[]};class f{constructor(e,o){this.rosterService=e,this.learningService=o,this.form=(0,_.$U)(),this.rosterList$=this.rosterService.list$,this.lessonCreated=new n.vpe}create(){var e=this;return(0,m.Z)(function*(){if(!e.form.valid)return;const o=(0,_.go)(e.form);if(!o)return;const t=yield(0,T.z)(e.rosterList$);e.learningService.createFlashCardDeck({...o,name:t[o.rosterIndex||0].title}),e.lessonCreated.next()})()}setUnitProfiles(e){this.form.controls.unitProfiles.controls.attacks.setValue(e),this.form.controls.unitProfiles.controls.ballisticSkill.setValue(e),this.form.controls.unitProfiles.controls.leadership.setValue(e),this.form.controls.unitProfiles.controls.movement.setValue(e),this.form.controls.unitProfiles.controls.save.setValue(e),this.form.controls.unitProfiles.controls.strength.setValue(e),this.form.controls.unitProfiles.controls.toughness.setValue(e),this.form.controls.unitProfiles.controls.weaponSkill.setValue(e),this.form.controls.unitProfiles.controls.wounds.setValue(e)}setWeaponProfiles(e){this.form.controls.weaponProfiles.controls.abilities.setValue(e),this.form.controls.weaponProfiles.controls.armourPenetration.setValue(e),this.form.controls.weaponProfiles.controls.damage.setValue(e),this.form.controls.weaponProfiles.controls.range.setValue(e),this.form.controls.weaponProfiles.controls.strength.setValue(e),this.form.controls.weaponProfiles.controls.type.setValue(e)}}f.\u0275fac=function(e){return new(e||f)(n.Y36(h.s),n.Y36(_.HC))},f.\u0275cmp=n.Xpm({type:f,selectors:[["bst-flash-card-lesson-form"]],outputs:{lessonCreated:"lessonCreated"},standalone:!0,features:[n.jDz],decls:47,vars:7,consts:[[3,"formGroup"],["formControlName","rosterIndex"],[3,"value",4,"ngFor","ngForOf"],[3,"ionChange"],["unitProfileToggle",""],["formGroupName","unitProfiles",4,"ngIf"],["weaponProfileToggle",""],["formGroupName","weaponProfiles",4,"ngIf"],["formControlName","rules"],["formControlName","unitRules"],["formControlName","psychicPowers"],["formControlName","unitPsychicPowers"],["formControlName","boxes","type","number","inputmode","numeric","value","3"],["expand","full",3,"click"],[3,"value"],["formGroupName","unitProfiles"],["formControlName","attacks"],["formControlName","ballisticSkill"],["formControlName","leadership"],["formControlName","save"],["formControlName","toughness"],["formControlName","weaponSkill"],["formControlName","wounds"],["formControlName","movement"],["formControlName","strength"],["formGroupName","weaponProfiles"],["formControlName","abilities"],["formControlName","armourPenetration"],["formControlName","damage"],["formControlName","range"],["formControlName","type"]],template:function(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-list",0)(1,"ion-item")(2,"ion-label"),n._uU(3,"Roster"),n.qZA(),n.TgZ(4,"ion-select",1),n.YNc(5,A,2,2,"ion-select-option",2),n.ALo(6,"async"),n.qZA()(),n.TgZ(7,"ion-item")(8,"ion-label")(9,"h4"),n._uU(10,"Einheiten Profile"),n.qZA()(),n.TgZ(11,"ion-checkbox",3,4),n.NdJ("ionChange",function(){n.CHM(t);const l=n.MAs(12);return n.KtG(o.setUnitProfiles(l.checked))}),n.qZA()(),n.YNc(13,b,37,0,"ng-container",5),n.TgZ(14,"ion-item")(15,"ion-label")(16,"h4"),n._uU(17,"Waffen-Profile"),n.qZA()(),n.TgZ(18,"ion-checkbox",3,6),n.NdJ("ionChange",function(){n.CHM(t);const l=n.MAs(19);return n.KtG(o.setWeaponProfiles(l.checked))}),n.qZA()(),n.YNc(20,k,28,0,"ng-container",7),n.TgZ(21,"ion-item")(22,"ion-label"),n._uU(23,"Regeln"),n.qZA(),n._UZ(24,"ion-checkbox",8),n.qZA(),n.TgZ(25,"ion-item")(26,"ion-label"),n._uU(27,"Einheiten-Regeln"),n.qZA(),n._UZ(28,"ion-checkbox",9),n.qZA(),n.TgZ(29,"ion-item")(30,"ion-label"),n._uU(31,"Psikr\xe4fte"),n.qZA(),n._UZ(32,"ion-checkbox",10),n.qZA(),n.TgZ(33,"ion-item")(34,"ion-label"),n._uU(35,"Einheiten-Psikr\xe4fte"),n.qZA(),n._UZ(36,"ion-checkbox",11),n.qZA(),n.TgZ(37,"ion-item")(38,"ion-label")(39,"h4"),n._uU(40,"Einstellungen"),n.qZA()()(),n.TgZ(41,"ion-item")(42,"ion-label"),n._uU(43,"Karten-Boxen"),n.qZA(),n._UZ(44,"ion-input",12),n.qZA(),n.TgZ(45,"ion-button",13),n.NdJ("click",function(){return o.create()}),n._uU(46,"Deck erstellen"),n.qZA()()}if(2&e){const t=n.MAs(12),r=n.MAs(19);n.Q6J("formGroup",o.form),n.xp6(5),n.Q6J("ngForOf",n.lcZ(6,4,o.rosterList$)||n.DdM(6,U)),n.xp6(8),n.Q6J("ngIf",t.checked),n.xp6(7),n.Q6J("ngIf",r.checked)}},dependencies:[c.ez,c.sg,c.O5,c.Ov,u.UX,u.JJ,u.JL,u.sg,u.u,u.x0,i.Pc,i.YG,i.nz,i.pK,i.Ie,i.Q$,i.q_,i.t9,i.n0,i.w,i.as,i.QI],styles:["[_nghost-%COMP%]{display:block}"]});var M=a(3573),x=a(4004);class p{constructor(e,o){this.translationsService=e,this.actionSheetCtrl=o,this.flags=this.translationsService.languages,this.selectedFlag$=this.translationsService.selectedLanguage$.pipe((0,x.U)(t=>this.flags[t].flag))}selectLanguage(){var e=this;return(0,m.Z)(function*(){(yield e.actionSheetCtrl.create({header:"Sprache w\xe4hlen",buttons:Object.keys(e.flags).map(t=>({text:e.flags[t].flag+" "+e.flags[t].name,handler:()=>{e.translationsService.setLanguage(t)}}))})).present()})()}exportTranslations(){this.translationsService.export()}importTranslations(e){var o=this;return(0,m.Z)(function*(){const t=e.target,r=t.files;if(!t||!r)return;const l=r[0];l&&o.translationsService.import(l)})()}}p.\u0275fac=function(e){return new(e||p)(n.Y36(M.fA),n.Y36(i.BX))},p.\u0275cmp=n.Xpm({type:p,selectors:[["bst-translation-settings"]],standalone:!0,features:[n.jDz],decls:27,vars:6,consts:[[3,"click"],["name","save-outline"],["name","folder-open-outline"],["type","file","accept","application/json",1,"ion-hide",3,"change"],["i",""],[3,"checked","ionChange"],["tt",""]],template:function(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-footer")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"\xdcbersetzen"),n.qZA()(),n.TgZ(4,"ion-toolbar")(5,"ion-buttons")(6,"ion-button",0),n.NdJ("click",function(){return o.selectLanguage()}),n._uU(7),n.ALo(8,"async"),n.qZA(),n.TgZ(9,"span")(10,"ion-button",0),n.NdJ("click",function(){return o.exportTranslations()}),n._UZ(11,"ion-icon",1),n.qZA(),n.TgZ(12,"ion-label"),n._uU(13,"Export"),n.qZA()(),n.TgZ(14,"span")(15,"ion-button",0),n.NdJ("click",function(){n.CHM(t);const l=n.MAs(20);return n.KtG(l.click())}),n._UZ(16,"ion-icon",2),n.qZA(),n.TgZ(17,"ion-label"),n._uU(18,"Import"),n.qZA(),n.TgZ(19,"input",3,4),n.NdJ("change",function(l){return o.importTranslations(l)}),n.qZA()(),n.TgZ(21,"span")(22,"ion-toggle",5,6),n.NdJ("ionChange",function(){n.CHM(t);const l=n.MAs(23);return n.KtG(o.translationsService.setTranslationsEditMode(l.checked))}),n.ALo(24,"async"),n.qZA(),n.TgZ(25,"ion-label"),n._uU(26,"Bearbeiten"),n.qZA()()()()()}2&e&&(n.xp6(7),n.hij(" ",n.lcZ(8,2,o.selectedFlag$)," "),n.xp6(15),n.Q6J("checked",n.lcZ(24,4,o.translationsService.translationsEditMode$)))},dependencies:[c.ez,c.Ov,i.Pc,i.YG,i.Sm,i.fr,i.gu,i.Q$,i.wd,i.ho,i.sr,i.w],styles:["ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]:last-of-type{padding-bottom:50px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:flex-start}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}"]});const q=["modal"];function v(s,e){if(1&s){const o=n.EpF();n.TgZ(0,"ion-button",16),n.NdJ("click",function(){n.CHM(o);const r=n.oxw().index,l=n.oxw();return n.KtG(l.updateFile(r))}),n._UZ(1,"ion-icon",18),n.qZA()}}const F=function(s){return["roster",s]};function P(s,e){if(1&s){const o=n.EpF();n.TgZ(0,"ion-item")(1,"ion-label",13),n._UZ(2,"ion-icon",1),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",14),n.YNc(5,v,2,0,"ion-button",15),n.TgZ(6,"ion-button",16),n.NdJ("click",function(){const l=n.CHM(o).index,Z=n.oxw();return n.KtG(Z.deleteRoster(l))}),n._UZ(7,"ion-icon",17),n.qZA()()()}if(2&s){const o=e.$implicit,t=e.index;n.xp6(1),n.Q6J("routerLink",n.VKq(3,F,t)),n.xp6(2),n.hij(" ",o.title," "),n.xp6(2),n.Q6J("ngIf",o.canUpdate)}}function N(s,e){if(1&s&&(n.TgZ(0,"div",20),n._UZ(1,"ion-icon",21),n.TgZ(2,"ion-badge",22),n._uU(3),n.qZA()()),2&s){const o=e.$implicit,t=e.index,r=n.oxw().$implicit;n.xp6(1),n.Q6J("name",0===o?"file-tray-outline":"file-tray-full-outline"),n.xp6(1),n.Q6J("color",r.boxContent.length-1===t?"success":"medium"),n.xp6(1),n.Oqu(o)}}const y=function(s){return["flash-card-lesson",s]};function S(s,e){if(1&s){const o=n.EpF();n.TgZ(0,"ion-item")(1,"div",13),n._uU(2),n.qZA(),n.YNc(3,N,4,3,"div",19),n.TgZ(4,"ion-button",9),n.NdJ("click",function(){const l=n.CHM(o).index,Z=n.oxw();return n.KtG(Z.deleteDeck(l))}),n._UZ(5,"ion-icon",17),n.qZA()()}if(2&s){const o=e.$implicit,t=e.index;n.xp6(1),n.Q6J("routerLink",n.VKq(3,y,t)),n.xp6(1),n.Oqu(o.name),n.xp6(1),n.Q6J("ngForOf",o.boxContent)}}function J(s,e){if(1&s){const o=n.EpF();n.TgZ(0,"ion-content")(1,"ion-header")(2,"ion-toolbar")(3,"ion-title")(4,"h1"),n._uU(5,"Deck erstellen"),n.qZA()(),n.TgZ(6,"ion-buttons",14)(7,"ion-button",23),n.NdJ("click",function(){n.CHM(o),n.oxw();const r=n.MAs(33);return n.KtG(r.isOpen=!1)}),n._UZ(8,"ion-icon",24),n.qZA()()()(),n.TgZ(9,"bst-flash-card-lesson-form",25),n.NdJ("lessonCreated",function(){n.CHM(o),n.oxw();const r=n.MAs(33);return n.KtG(r.isOpen=!1)}),n.qZA()()}}class g{constructor(e,o){this.rostersService=e,this.learningService=o,this.rosterList$=this.rostersService.list$,this.lessons$=this.learningService.lessons$}saveFile(e){var o=this;return(0,m.Z)(function*(){const t=e.target,r=t.files;if(!t||!r)return;const l=r[0];l&&(yield o.rostersService.addRoster(l))})()}linkFile(e){var o=this;return(0,m.Z)(function*(){yield o.rostersService.addRosterFromUrl(e)})()}updateFile(e){var o=this;return(0,m.Z)(function*(){yield o.rostersService.updateRoster(e)})()}deleteRoster(e){this.rostersService.deleteRoster(e)}deleteDeck(e){this.learningService.deleteDeck(e)}}g.\u0275fac=function(e){return new(e||g)(n.Y36(h.s),n.Y36(_.HC))},g.\u0275cmp=n.Xpm({type:g,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&n.Gf(q,5),2&e){let t;n.iGM(t=n.CRH())&&(o.modal=t.first)}},standalone:!0,features:[n.jDz],decls:35,vars:7,consts:[[1,"add-roster"],["color","primary","slot","start","name","document-outline"],["fill","outline",3,"click"],["type","file",1,"ion-hide",3,"change"],["f",""],["type","text"],["u",""],["slot","end","fill","outline",3,"click"],[4,"ngFor","ngForOf"],["slot","end","fill","clear",3,"click"],["name","add"],[3,"isOpen"],["modal",""],[3,"routerLink"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],["fill","clear",3,"click"],["color","primary","name","trash"],["color","primary","name","reload"],["slot","end","class","boxes",4,"ngFor","ngForOf"],["slot","end",1,"boxes"],[3,"name"],[3,"color"],[3,"click"],["name","close"],[3,"lessonCreated"]],template:function(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"BattleScribe Tools"),n.qZA()()(),n.TgZ(4,"ion-content")(5,"ion-item-divider"),n._uU(6,"Roster"),n.qZA(),n.TgZ(7,"ion-item",0)(8,"ion-label"),n._UZ(9,"ion-icon",1),n._uU(10," Neue Datei (exportierte .rosz Datei) "),n.qZA(),n.TgZ(11,"ion-button",2),n.NdJ("click",function(){n.CHM(t);const l=n.MAs(14);return n.KtG(l.click())}),n._uU(12,"w\xe4hlen..."),n.qZA(),n.TgZ(13,"input",3,4),n.NdJ("change",function(l){n.CHM(t);const Z=n.MAs(14);return o.saveFile(l),n.KtG(Z.value="")}),n.qZA()(),n.TgZ(15,"ion-item",0)(16,"ion-label"),n._UZ(17,"ion-icon",1),n._uU(18," URL laden "),n.qZA(),n._UZ(19,"input",5,6),n.TgZ(21,"ion-button",7),n.NdJ("click",function(){n.CHM(t);const l=n.MAs(20);return n.KtG(o.linkFile(l.value))}),n._uU(22,"laden..."),n.qZA()(),n.YNc(23,P,8,5,"ion-item",8),n.ALo(24,"async"),n.TgZ(25,"ion-item-divider"),n._uU(26," Flash Card Decks "),n.TgZ(27,"ion-button",9),n.NdJ("click",function(){n.CHM(t);const l=n.MAs(33);return n.KtG(l.isOpen=!0)}),n._UZ(28,"ion-icon",10),n.qZA()(),n.YNc(29,S,6,5,"ion-item",8),n.ALo(30,"async"),n.qZA(),n._UZ(31,"bst-translation-settings"),n.TgZ(32,"ion-modal",11,12),n.YNc(34,J,10,0,"ng-template"),n.qZA()}2&e&&(n.xp6(23),n.Q6J("ngForOf",n.lcZ(24,3,o.rosterList$)),n.xp6(6),n.Q6J("ngForOf",n.lcZ(30,5,o.lessons$)),n.xp6(3),n.Q6J("isOpen",!1))},dependencies:[c.ez,c.sg,c.O5,c.Ov,C.Bz,C.rH,i.Pc,i.yp,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.rH,i.Q$,i.wd,i.sr,i.ki,i.YI,h.$,_.W8,p,u.UX,f],styles:[".boxes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;height:20px}ion-item-divider[_ngcontent-%COMP%]:not(:first-of-type){margin-top:50px}.add-roster[_ngcontent-%COMP%]{--background: var(--ion-color-light)}"]})}}]);